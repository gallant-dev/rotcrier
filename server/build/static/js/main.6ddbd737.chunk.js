(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{76:function(e,t,n){},97:function(e,t,n){},99:function(e,t,n){"use strict";n.r(t);var r=n(0),s=n.n(r),c=n(18),a=n.n(c),o=(n(76),n(9)),i=n(112),u=n(105),l=n(113),d=n(111),j=n(68),p=n(67),b=n(104),h=n(3),m=n.n(h),f=n(10),x=n(109),O=n(1);var g=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),u=i[0],l=i[1],j=function(){l(""),c(!1)},b=function(){var t=Object(f.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=n.target.elements,t.next=4,fetch("/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayName:r.displayNameInput.value,email:r.emailInput.value,password:r.passwordInput.value}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=s,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=11;break}return a=c&&c.message||n.status,l(c),t.abrupt("return",Promise.reject(a));case 11:sessionStorage.setItem("id",c.id),sessionStorage.setItem("displayName",c.displayName),sessionStorage.setItem("session",c.session),e.onLogin(),console.log(c);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{variant:"primary",onClick:function(){return c(!0)},children:"Sign up"}),Object(O.jsxs)(x.a,{show:s,onHide:j,backdrop:"static",keyboard:!1,children:[Object(O.jsx)(x.a.Header,{children:Object(O.jsx)(x.a.Title,{children:"Sign up"})}),Object(O.jsx)(x.a.Body,{children:Object(O.jsxs)(d.a,{onSubmit:function(e){return b(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"displayNameInput",children:[Object(O.jsx)(d.a.Label,{children:"Display name"}),Object(O.jsx)(d.a.Control,{type:"text",placeholder:"Enter display name"}),Object(O.jsx)(d.a.Text,{className:"text-muted",children:"This will be your identity with your fellow shit givers."})]}),Object(O.jsxs)(d.a.Group,{controlId:"emailInput",children:[Object(O.jsx)(d.a.Label,{children:"Email address"}),Object(O.jsx)(d.a.Control,{type:"email",placeholder:"Enter email"}),Object(O.jsx)(d.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(O.jsxs)(d.a.Group,{controlId:"passwordInput",children:[Object(O.jsx)(d.a.Label,{children:"Password"}),Object(O.jsx)(d.a.Control,{type:"password",placeholder:"Password"})]}),Object(O.jsxs)(x.a.Footer,{children:[Object(O.jsx)(d.a.Label,{style:{color:"red"},children:u}),Object(O.jsx)(p.a,{variant:"primary",onClick:j,children:"Close"}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})]})]})};var v=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),u=i[0],l=i[1],j=function(){l(""),c(!1)},b=function(){var t=Object(f.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=n.target.elements,t.next=4,fetch("/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayName:r.displayNameInput.value,password:r.passwordInput.value}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=s,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=11;break}return a=c&&c.message||n.status,l(c),t.abrupt("return",Promise.reject(a));case 11:sessionStorage.setItem("id",c.id),sessionStorage.setItem("displayName",c.displayName),sessionStorage.setItem("session",c.session),e.onLogin(),console.log(c);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{variant:"primary",onClick:function(){return c(!0)},children:"Sign in"}),Object(O.jsxs)(x.a,{show:s,onHide:j,backdrop:"static",keyboard:!1,children:[Object(O.jsx)(x.a.Header,{children:Object(O.jsx)(x.a.Title,{children:"Sign in"})}),Object(O.jsx)(x.a.Body,{children:Object(O.jsxs)(d.a,{onSubmit:function(e){return b(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"displayNameInput",children:[Object(O.jsx)(d.a.Label,{children:"Display name"}),Object(O.jsx)(d.a.Control,{type:"text",placeholder:"Enter display name"})]}),Object(O.jsxs)(d.a.Group,{controlId:"passwordInput",children:[Object(O.jsx)(d.a.Label,{children:"Password"}),Object(O.jsx)(d.a.Control,{type:"password",placeholder:"Password"})]}),Object(O.jsxs)(x.a.Footer,{children:[Object(O.jsx)(d.a.Label,{style:{color:"red"},children:u}),Object(O.jsx)(p.a,{variant:"primary",onClick:j,children:"Close"}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})]})]})},y=n(110);var w=function(e){var t=sessionStorage.getItem("displayName"),n=function(){var t=Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/users/logout",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayName:sessionStorage.getItem("displayName"),sessionId:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=s,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=10;break}return a=c&&c.message||n.status,t.abrupt("return",Promise.reject(a));case 10:e.onLogout(),console.log(c);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(O.jsxs)(y.a,{title:t,id:"collapsible-nav-dropdown",children:[Object(O.jsx)(y.a.Item,{onClick:function(){return e.onChangeFocus({type:"user",name:t})},children:"Profile"}),Object(O.jsx)(y.a.Item,{onClick:function(){return n()},children:"Logout"})]})};var S=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],a=function(){c(!0),e.setLoggedIn()};return Object(r.useEffect)((function(){sessionStorage.getItem("session")&&a()}),[e.viewFocus]),s?Object(O.jsx)(w,{onChangeFocus:e.onChangeFocus,onLogout:function(){c(!1),e.setLoggedOut()}}):Object(O.jsxs)(b.a,{children:[Object(O.jsx)(v,{onLogin:a}),Object(O.jsx)(g,{onLogin:a})]})};var k=function(e){Object(r.useEffect)((function(){if(e.isLoggedIn){var t=sessionStorage.getItem("displayName");(function(){var n=Object(f.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/sections/"+t+"/memberships",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,c,a,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=s,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=10;break}return a=c&&c.message||n.status,t.abrupt("return",Promise.reject(a));case 10:o=c.map((function(e){var t={type:"section"};return t.name=e.title,t})),e.onUpdateMemberSections(o),console.log(o);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}}),[e.isLoggedIn,e.viewFocus]);var t=function(t){e.onFocusChange(t)};return Object(O.jsxs)(y.a,{title:e.viewFocus.name&&e.viewFocus.name.length>25?e.viewFocus.name.substring(0,25)+"...":e.viewFocus.name,id:"collapsible-nav-dropdown",children:[[{type:"menu",name:"Home"},{type:"menu",name:"Top Posts"},{type:"menu",name:"New Posts"}].map((function(n){return n!==e.viewFocus&&Object(O.jsx)(y.a.Item,{onClick:function(e){return t(n)},children:n.name},n.type+n.name)})),e.isLoggedIn&&Object(O.jsx)(y.a.Divider,{}),e.isLoggedIn&&[{type:"menu",name:"Create a new section"},{type:"menu",name:"Create a new post"}].map((function(n){return n!==e.viewFocus&&Object(O.jsx)(y.a.Item,{onClick:function(e){return t(n)},children:n.name},n.type+n.name)})),e.memberSections.length>0&&Object(O.jsx)(y.a.Divider,{}),e.memberSections.length>0&&e.memberSections.map((function(n){return n!==e.viewFocus&&Object(O.jsx)(y.a.Item,{onClick:function(e){return t(n)},children:n.name.length>25?n.name.substring(0,25)+"...":n.name},n.type+n.name)}))]})};var C=function(e){var t=Object(r.useState)(!1),n=Object(o.a)(t,2),s=n[0],c=n[1],a=function(t){e.onFocusChange(t)};return Object(O.jsx)(i.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",sticky:"top",children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)(i.a.Brand,{href:"#home",children:"rotcrier"}),Object(O.jsx)(i.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(O.jsxs)(i.a.Collapse,{id:"responsive-navbar-nav",children:[Object(O.jsx)(l.a,{className:"mr-auto",children:Object(O.jsx)(k,{isLoggedIn:s,onUpdateMemberSections:e.onUpdateMemberSections,onFocusChange:a,memberSections:e.memberSections,viewFocus:e.viewFocus})}),Object(O.jsx)(l.a,{children:Object(O.jsx)(S,{onChangeFocus:a,setLoggedIn:function(){c(!0)},setLoggedOut:function(){c(!1),a({type:"menu",name:"Home"}),sessionStorage.clear()}})})]}),Object(O.jsx)(l.a,{children:Object(O.jsxs)(d.a,{className:"d-flex",onSubmit:function(t){return function(t){t.preventDefault(),a({type:"search",name:"Search"}),e.onSearch(t.target.elements.params.value)}(t)},children:[Object(O.jsx)(d.a.Group,{className:"me-1",controlId:"params",children:Object(O.jsx)(j.a,{type:"search",placeholder:"Search",className:"mr-sm-2 me-1 ","aria-label":"Search"})}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",children:"Search"})]})})]})})},I=n(115),A=n(116),F=n(108),N=n(69),T=n(62),E=n(106),P=n(114),G=n(107),L=n.p+"static/media/shit.9c5175aa.png",U=n.p+"static/media/no-shit.4775112b.png";var B=function(e){var t=Object(r.useState)([]),n=Object(o.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)(e.shitFor),i=Object(o.a)(a,2),u=i[0],l=(i[1],Object(r.useState)(!1)),d=Object(o.a)(l,2),j=d[0],p=d[1],b=function(){var e=Object(f.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/shits/"+u.type+"/"+u.id,e.next=3,fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok||409==t.status){e.next=11;break}return a=s&&s.message||t.status,console.log(a),e.abrupt("return",Promise.reject(a));case 11:for(o=!1,i=0;i<s.length;i++)s[i].UserId==sessionStorage.getItem("id")&&(o=!0);c(s),p(o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){b()}),[e.viewFocus]);var h=function(){var e=Object(f.a)(m.a.mark((function e(){var t,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=sessionStorage.getItem("id"),n="post"==u.type?u.id:null,r="comment"==u.type?u.id:null,console.log(n+" "+r),t){e.next=6;break}return e.abrupt("return",window.alert("You must be logged in to give a shit!"));case 6:if(j){e.next=11;break}return e.next=9,fetch("/shits",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({UserId:t,PostId:n,CommentId:r,sessionId:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=11;break}return 409==(c=s&&s.message||t.status)&&p(!0),e.abrupt("return",Promise.reject(c));case 11:b(),p(!0),console.log(s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 9:e.next=13;break;case 11:return e.next=13,fetch("/shits",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({UserId:t,PostId:n,CommentId:r,sessionId:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=10;break}return c=s&&s.message||t.status,e.abrupt("return",Promise.reject(c));case 10:b(),p(!1),console.log(s);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(O.jsx)(P.a,{placement:"right",delay:{show:250,hide:400},overlay:function(t){return Object(O.jsx)(E.a,Object(T.a)(Object(T.a)({id:"shit-tooltip"},e),{},{children:t?"Shit given!":"Do you give a shit?"}))}(j),children:Object(O.jsxs)("div",{className:"text-center",children:[Object(O.jsx)("h6",{children:s.length}),Object(O.jsx)(G.a,{onClick:function(){return h()},width:35,height:35,src:j?L:U})]})})};var D=function(e){var t=Object(r.useState)(),n=Object(o.a)(t,2),s=(n[0],n[1]),c=Object(r.useState)([]),a=Object(o.a)(c,2),i=a[0],l=a[1],d=function(){var t=Object(f.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),null==n){t.next=6;break}return t.next=4,fetch("/users/"+n+"/memberships/posts/0/25",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,c,a,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=c,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(a=t.t0,n.ok){t.next=10;break}return o=a&&a.message||n.status,t.abrupt("return",Promise.reject(o));case 10:s(a),i=a.memberships.map((function(e){return e.Posts})).flat().sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),l(i),0==i.length&&e.onFocusChange({type:"menu",name:"Top Posts"});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:t.next=8;break;case 6:return t.next=8,fetch("/posts/unauth/0/25",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=10;break}return c=s&&s.message||t.status,e.abrupt("return",Promise.reject(c));case 10:a=s.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),l(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){var e=sessionStorage.getItem("displayName");d(e||null)}),[e.isLoggedIn,e.viewFocus]);for(var j=function(){var t=Math.ceil(e.memberSections.length/25);return t},p=[],b=1;b<=j();b++)p.push(Object(O.jsx)(I.a.Item,{active:1===b,children:b},b));return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)("h2",{children:"Recent Updates"}),i.length>0&&i.map((function(t){return Object(O.jsx)(A.a,{children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(B,{shitFor:{type:"post",id:t.id.toString()}})}),Object(O.jsxs)(N.a,{xs:10,sm:10,md:10,lg:9,xl:8,onClick:function(n){return e.onFocusChange({type:"post",name:t.title})},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})]})})},t.id+t.title)}))]})})};var H=function(e){var t=Object(r.useState)(),n=Object(o.a)(t,2),s=(n[0],n[1],Object(r.useState)([])),c=Object(o.a)(s,2),a=c[0],i=c[1],l=function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/unauth/0/25",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=10;break}return c=s&&s.message||t.status,e.abrupt("return",Promise.reject(c));case 10:a=s.sort((function(e,t){return t.Shits.length-e.Shits.length})),i(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){l()}),[e.isLoggedIn,e.viewFocus]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)("h2",{children:"Top Posts"}),a.length>0&&a.map((function(t,n){return Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:1,sm:1,md:1,lg:1,xl:1,children:Object(O.jsx)(F.a,{children:Object(O.jsx)("h6",{className:"h-100 pl-75 .pt-30",children:n+1})})}),Object(O.jsx)(N.a,{xs:11,sm:11,md:11,lg:11,xl:11,children:Object(O.jsx)(A.a,{children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(B,{shitFor:{type:"post",id:t.id}})}),Object(O.jsxs)(N.a,{xs:10,sm:10,md:10,lg:9,xl:8,onClick:function(n){return e.onFocusChange({type:"post",name:t.title})},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})]})})},t.id+t.title)})]})}))]})})};var Y=function(e){var t=Object(r.useState)(),n=Object(o.a)(t,2),s=(n[0],n[1],Object(r.useState)([])),c=Object(o.a)(s,2),a=c[0],i=c[1],l=function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/posts/unauth/0/25",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=10;break}return c=s&&s.message||t.status,e.abrupt("return",Promise.reject(c));case 10:console.log(s),a=s.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),console.log(a),i(s),console.log(s);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){l()}),[e.isLoggedIn,e.viewFocus]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)("h2",{children:"New Posts"}),a.length>0&&a.map((function(t){return Object(O.jsx)(A.a,{children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{sm:1,children:Object(O.jsx)(B,{shitFor:{type:"post",id:t.id.toString()}})}),Object(O.jsxs)(N.a,{onClick:function(n){return e.onFocusChange({type:"post",name:t.title})},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})]})})},t.id+t.title)}))]})})};var J=function(e){console.log(e.search);var t=Object(r.useState)(),n=Object(o.a)(t,2),s=(n[0],n[1]),c=Object(r.useState)([]),a=Object(o.a)(c,2),i=a[0],l=a[1],d=Object(r.useState)([]),j=Object(o.a)(d,2),p=j[0],b=j[1],h=Object(r.useState)([]),x=Object(o.a)(h,2),g=x[0],v=x[1];return Object(r.useEffect)((function(){(function(){var t=Object(f.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/search/"+encodeURIComponent(e.search),t.next=3,fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,c,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(c=e.t0,t.ok){e.next=10;break}return a=c&&c.message||t.status,e.abrupt("return",Promise.reject(a));case 10:console.log(c),s(sessionStorage.getItem("id")),l(c.Sections),o=c.Posts.sort((function(e,t){return t.Shits.length-e.Shits.length})),b(o),v(c.Users);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.viewFocus]),Object(O.jsx)(u.a,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsxs)(N.a,{xs:12,sm:12,md:12,lg:7,xl:6,children:[Object(O.jsx)("h2",{children:"Posts"}),p.length>0?p.map((function(t){return Object(O.jsx)(A.a,{onClick:function(n){return e.onFocusChange({type:"post",name:t.title})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(B,{shitFor:{type:"post",id:t.id}})}),Object(O.jsxs)(N.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})]})})},t.id+t.title)})):"0 found"]}),Object(O.jsxs)(N.a,{xs:12,sm:12,md:6,lg:5,xl:3,className:"pt-2",children:[Object(O.jsx)("h2",{children:"Sections"}),i.length>0?i.map((function(t){return Object(O.jsx)(A.a,{onClick:function(n){return e.onFocusChange({type:"section",name:t.title})},children:Object(O.jsxs)(A.a.Body,{children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.description.length>125?t.description.substring(0,125)+"...":t.description})]})},t.id+t.title)})):"0 found"]}),Object(O.jsxs)(N.a,{xs:12,sm:12,md:6,lg:6,xl:3,className:"pt-2",children:[Object(O.jsx)("h2",{children:"Users"}),g.length>0?g.map((function(t){return Object(O.jsx)(A.a,{onClick:function(n){return e.onFocusChange({type:"user",name:t.displayName})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsx)(A.a.Title,{children:t.displayName.length>125?t.displayName.substring(0,125)+"...":t.displayName})})},t.id+t.displayName)})):"0 found"]})]})})};var Q=function(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),s=n[0],c=n[1],a=function(){var t=Object(f.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),r=n.target.elements,t.next=4,fetch("/sections",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:r.sectionTitle.value,description:r.description.value,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,a,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=s,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(a=t.t0,n.ok){t.next=11;break}return o=a&&a.message||n.status,c(a),t.abrupt("return",Promise.reject(o));case 11:console.log(a.title),e.onFocusChange({type:"section",name:a.title}),c(""),console.log(a);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)(u.a,{children:Object(O.jsx)(F.a,{className:"justify-content-center",children:Object(O.jsx)(N.a,{xs:12,sm:12,md:8,lg:8,xl:6,children:Object(O.jsxs)(d.a,{onSubmit:function(e){return a(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"sectionTitle",children:[Object(O.jsx)(d.a.Label,{children:"Title"}),Object(O.jsx)(d.a.Control,{type:"text",placeholder:"Your new section's title"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:s})]}),Object(O.jsxs)(d.a.Group,{controlId:"description",children:[Object(O.jsx)(d.a.Label,{children:"Description"}),Object(O.jsx)(d.a.Control,{as:"textarea",rows:8,placeholder:"A brief description of the section"})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(){e.onFocusChange({type:"menu",name:"Home"})},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"})]})]})})})})},R="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB0UlEQVRoge2YsUrDQBjHf4mCbsXVd3CK4KibvoE4CuUyd6+YgHvnHgUfQ4ovYMGuvoEP0E1BGocYiEdySZrk7sT8x+O+4/e7fhfoB0OG/O94tgHyEUJMgDvg3fO82/l8/lpV44yAECIC7nNLm+12e7VYLF50dU4IFMBnqZSwLqCBz6KVsCpQAv8JHChrG+BSSrlSz/B7YqtMCfwGOAdiZX0ELMMwPFXP2e8HTx8NfHbLKyEEyp5RkiSPwEm+yPgvoOn5mdIiT8CHsudYLTIqUPFgp2EYXv/sOwOWwKGy50EtMvaIa3xtAL5IISekfZ9PLKWM1AIjApqenwFTqt9iITwYaKGKBxt7nndDevNlicrgAfY6YCxNja8N6/X6LQgCH7goOCKWUqqf1F/prYXqwAOMx+PA9/1n4EjZG1XBQ08CpuChBwGT8NCxgGl46FDABjx0JGALHjoQsAkPLQVsw0MLARfgYUcBV+BhBwGX4KGhgGvw0EDARXioKeAqPNQQcBkeKgRchweNwF+AB/1fSufhodlg6xd8bvRRND0wAg8NBNSbJx08qfDGbj5L46mEC22Tj+4RJw3OsQIP3cyFrMFDewGr8NBOwDr8kCFDhtjPN6ZWU6E3QqN4AAAAAElFTkSuQmCC",M="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAAD1ElEQVR4nO2cvW4TQRRGz9gdToMQEh1P4dDHeYWlQSDR8FNAEhoo00FFElLwUxBBiV8BS2lDniKih8YmQiK5FIntTYIV787Mzh1xT2nv7Ox+x7OenbUvGIZhGIZhGIZhGIZhGIZhGIZheCBF0RZwqY+jLgJO1mnF7CNaOFIU7dHPgx0ROVwY7D9yILH6ioGAG/VubSJyo3N85Y7b3f0To58oAsbhI9wFEORDThIm4SNPT1/4EktCcAHnw5+8nomEC+FP34giIaiAWeFP3lcuYWb40w2CSwgm4LLwJ9splXBp+NMNg0oIImDe8CfbK5Mwd/jTBsEkeE+xpCjaox8Hn+YNH8DhHvxaWtzSMEWtHD6A4/aofbgjRdH27d9bgOv3jxD3vWo7cTwZ9rrvUkqoFf6krYzo9499jyHYyQ+Xbr3EyYuq7VJdjvzC5/3C4NvjEMcc9NOXiwQt4UOE4a9dgqbwIdL1V6sEbeFDxC9AbRI0hg+RZyDD5cVXCM+rtgstQWv40MAUMLUEzeFDQ3PwVBK0hw8N3gQ1LSGH8KHhu9CmJOQSPiRYBogtIafwIdE6TCwJuYUPCRfCQkvIMXxIvBxcX8LZwHINHxSsx/tKAMg1fFAgAPwkONzvXMMHJQKgvoQ6aAkfFAmAZiRoCh+UCYC4ErSFDwoFQBwJGsMHpQIgrASt4YNiASdz++4GuBXP/agNHxQLAH8J2sOHAL8Lik9L9YfEF7Un57O8cG4/qkeBSgGhwi/tT60EdQJCh1/ar0oJqgTECr+0f3US1AiIHX6pH1USVAhoKvxSf2okJJ+G+j5MAdmq2s7Bw2Fv8a2G/yckPYAQT7IA6t6saRgJmf454l+PJPOUkOQSFPoZrgPpDPbXwL2pur/Ul6PGO435AD3Hh/ONCmgioNwkNCagyWByktCIgBSB5CIhuoCUQeQgIeosKHUAJ7OjvdW6s6NRr7sRe3YUr16Qok+f31KHbHUG+2uxRkKUEaApfPAbCeBWRsvd17FGQvh6QcrCD3VsONnsfN1/pvpvqprDL/WjSkK4ekEZhF/qT42EMPWCMgq/1K8KCd4Ccgy/1H9yCf6zoKJogVyr2swJ2wrW4qUz2Ft1wnblxuKun5y79zH4U71kWfoHIWUqj4SAJcvCfQnPXbRPV/hj5pYQuGhfsBsx1+8fda7evA98nrWN1vBhzps1zWUrx5wW8fsI3DvzuuLwy8wcCTkUbh1zXkIu4Y+5ICGn0sVjxhIEDnMKf8xEQuTi3VGRdVoafntTFwEXojaoYRiGYRiGYRiGYRiGYRiGYRj/N38BIo7a6agchMAAAAAASUVORK5CYII=";var K=function(e){var t=Object(r.useState)({}),n=Object(o.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)([]),i=Object(o.a)(a,2),l=i[0],j=i[1],b=Object(r.useState)({}),h=Object(o.a)(b,2),x=h[0],g=h[1],v=Object(r.useState)(!1),y=Object(o.a)(v,2),w=y[0],S=y[1],k=Object(r.useState)([]),C=Object(o.a)(k,2),I=C[0],T=C[1],E=Object(r.useState)(),P=Object(o.a)(E,2),L=P[0],U=P[1],D=Object(r.useState)(!1),H=Object(o.a)(D,2),Y=H[0],J=H[1],Q=Object(r.useState)(""),K=Object(o.a)(Q,2),q=K[0],V=K[1],W=function(){var t=Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.viewFocus.name),t.next=3,fetch("/sections/"+e.viewFocus.name,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=11;break}return a=s&&s.message||t.status,window.alert(a),e.abrupt("return",Promise.reject(a));case 11:console.log(s),c(s),j(s.members),g(s.members[0]),T(s.Posts),U(sessionStorage.getItem("id")),o=$(s.members,sessionStorage.getItem("id")),console.log(o),S(o);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){W()}),[e.viewFocus]);var X=function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,e.next=4,fetch("/sections",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:s.title,description:n.description.value,UserId:sessionStorage.getItem("id"),session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(a=e.t0,t.ok){e.next=11;break}return o=a&&a.message||t.status,V(a),e.abrupt("return",Promise.reject(o));case 11:J(!1),c(a),j(s.members),T(s.Posts),V(""),console.log(a);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(e){J(e)},Z=function(){var t=Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure you want to delete this section?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/sections",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:s.title,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=s,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=11;break}return a=c&&c.message||n.status,V(c),t.abrupt("return",Promise.reject(a));case 11:e.onFocusChange({type:"menu",name:"Home"}),console.log(c);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),$=function(e,t){var n=!1;console.log(e);for(var r=0;r<e.length;r++)e[r].id==t&&(n=!0);return console.log(e,t,n),n},_=function(){var t=Object(f.a)(m.a.mark((function t(n){var r,c;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=sessionStorage.getItem("id")){t.next=3;break}return t.abrupt("return",window.alert("You must be logged in to join!"));case 3:if(s.UserId!=r){t.next=5;break}return t.abrupt("return",window.alert("You are the moderator you can't abandon your section!"));case 5:return c=n?"/users/memberships/remove/":"/users/memberships/add/",console.log(s.title),t.next=9,fetch(c,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayName:sessionStorage.getItem("displayName"),title:s.title,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(r){var c,a,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null===(c=r.headers.get("content-type"))||void 0===c?void 0:c.includes("applickaation/json"),t.t0=a,!t.t0){t.next=6;break}return t.next=5,r.json();case 5:t.t0=t.sent;case 6:if(o=t.t0,r.ok){t.next=11;break}return i=o&&o.message||r.status,V(o),t.abrupt("return",Promise.reject(i));case 11:S(!n),W(),e.onFocusChange({type:"section",name:s.title}),console.log(o);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(u.a,{className:"pb-3",children:[Object(O.jsxs)(F.a,{className:"mb-3",children:[Object(O.jsxs)(N.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:[Object(O.jsx)("h1",{children:s&&s.title}),Object(O.jsxs)("h6",{onClick:function(){return e.onFocusChange({type:"user",name:x.displayName})},children:["Moderator: ",x&&x.displayName]}),!Y&&Object(O.jsx)("span",{children:s&&s.description}),Object(O.jsxs)("h6",{children:[l&&l.length," Members"]}),Object(O.jsx)(p.a,{variant:"secondary",onClick:function(e){return _(w)},children:w?"cancel membership":"become member"}),w&&Object(O.jsx)(p.a,{variant:"secondary",className:"ms-3",onClick:function(t){return e.onMakePost(s.title),void e.onFocusChange({type:"menu",name:"Create a new post"})},children:"make a post"}),Y&&Object(O.jsxs)(d.a,{onSubmit:function(e){return X(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"description",children:[Object(O.jsx)(d.a.Label,{children:"Description"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,defaultValue:s.description})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(e){return z(!1)},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:q})]})]})]}),Object(O.jsx)(N.a,{xs:1,sm:1,md:1,lg:1,xl:1,children:s.UserId==L&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G.a,{className:"edit p-1",width:25,height:25,src:R,alt:"Edit",onClick:function(e){return z(!0)}}),Object(O.jsx)(G.a,{className:"delete p-1",width:25,height:25,src:M,alt:"Delete",onClick:function(e){return Z()}})]})})]}),Object(O.jsx)(u.a,{children:I.length>0&&I.map((function(t){return Object(O.jsx)(A.a,{onClick:function(n){return e.onFocusChange({type:"post",name:t.title})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:1,sm:1,md:1,lg:1,xl:1,children:Object(O.jsx)(B,{shitFor:{type:"post",id:t.id}})}),Object(O.jsxs)(N.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})]})})},t.id+t.title)}))})]})};var q=function(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)(""),i=Object(o.a)(a,2),l=(i[0],i[1],function(){var t=Object(f.a)(m.a.mark((function t(n){var r;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),sessionStorage.getItem("id")){t.next=4;break}return t.abrupt("return",window.alert("You must be logged in to comment!"));case 4:return r=n.target.elements,t.next=7,fetch("/posts",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:r.postTitle.value.normalize(),body:r.body.value.normalize(),sectionTitle:r.sectionTitle.value.normalize(),UserId:sessionStorage.getItem("id"),session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,a,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=s,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(a=t.t0,n.ok){t.next=11;break}return o=a&&a.message||n.status,c(a),t.abrupt("return",Promise.reject(o));case 11:e.onFocusChange({type:"post",name:a.title}),c(""),console.log(a);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return Object(O.jsx)(u.a,{children:Object(O.jsx)(F.a,{className:"justify-content-center",children:Object(O.jsx)(N.a,{xs:12,sm:12,md:8,lg:8,xl:6,children:Object(O.jsxs)(d.a,{onSubmit:function(e){return l(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"postTitle",children:[Object(O.jsx)(d.a.Label,{children:"Title"}),Object(O.jsx)(d.a.Control,{required:!0,type:"text",placeholder:"Your new post's title"})]}),Object(O.jsxs)(d.a.Group,{controlId:"sectionTitle",children:[Object(O.jsx)(d.a.Label,{children:"Section"}),Object(O.jsx)(d.a.Control,{defaultValue:e.defaultSection,required:!0,type:"text",placeholder:"What section would you like to post in?"})]}),Object(O.jsxs)(d.a.Group,{controlId:"body",children:[Object(O.jsx)(d.a.Label,{children:"Body"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,placeholder:"What message would you like to share?"})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(){e.onFocusChange({type:"menu",name:"Home"})},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:s})]})]})})})})};var V=function(e){var t=Object(r.useState)(""),n=Object(o.a)(t,2),s=n[0],c=n[1],a=function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),sessionStorage.getItem("id")){t.next=4;break}return t.abrupt("return",window.alert("You must be logged in to comment!"));case 4:return r=n.target.elements,s=e.post.id,a="comment"==e.commentTarget.type?e.commentTarget.id:null,t.next=9,fetch("/comments",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({body:r.body.value,UserId:sessionStorage.getItem("id"),PostId:s,CommentId:a,sessionId:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(r){var s,a,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null===(s=r.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=a,!t.t0){t.next=6;break}return t.next=5,r.json();case 5:t.t0=t.sent;case 6:if(o=t.t0,r.ok){t.next=11;break}return i=o&&o.message||r.status,c(o),t.abrupt("return",Promise.reject(i));case 11:e.onCommentSubmit(),c(""),n.target.reset(),console.log(o);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(d.a,{onSubmit:function(e){return a(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"body",children:[Object(O.jsx)(d.a.Label,{children:"Comment"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,placeholder:"What comment would you like to make?"})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:s})]})]})},W=n(55);var X=function e(t){var n=Object(r.useState)(),s=Object(o.a)(n,2),c=s[0],a=s[1],i=Object(r.useState)(t.comment),u=Object(o.a)(i,2),l=u[0],j=u[1],b=Object(r.useState)([]),h=Object(o.a)(b,2),x=h[0],g=h[1],v=Object(r.useState)(!1),y=Object(o.a)(v,2),w=y[0],S=y[1],k=Object(r.useState)(!0),C=Object(o.a)(k,2),I=C[0],T=C[1],E=Object(r.useState)(!1),P=Object(o.a)(E,2),L=P[0],U=P[1],D=Object(r.useState)(""),H=Object(o.a)(D,2),Y=H[0],J=H[1],Q=function(e){U(e)},K=function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete this comment?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/comments",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:l.id,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=11;break}return c=s&&s.message||t.status,J(s),e.abrupt("return",Promise.reject(c));case 11:T(!1),J(""),console.log(s);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,e.next=4,fetch("/comments",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:l.id,body:n.body.value,UserId:sessionStorage.getItem("id"),PostId:l.PostId,CommentId:l.CommentId,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=11;break}return c=s&&s.message||t.status,J(s),e.abrupt("return",Promise.reject(c));case 11:U(!1),j(s),g(s.Comments),J(""),console.log(s);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(f.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/comments/"+l.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=11;break}return c=s&&s.message||t.status,console.log(c),e.abrupt("return",Promise.reject(c));case 11:console.log(s),j(s),a=s.Comments.sort((function(e,t){return t.Shits.length-e.Shits.length})),g(a),console.log(x);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){a(sessionStorage.getItem("id")),X()}),[t.viewFocus]);var z=function(e){t.onCommentTargetChange(e)},Z=function(){if(l.body){var e=l.body;console.log(e);var t=e.replace(/(((https?:\/\/)|(www\.))[^\s]+)/g,(function(e){var t=e;return t.match("^https?://")||(t="https://"+t),'<a href="'+t+'">'+t+"</a>"}));return Object(O.jsx)(O.Fragment,{children:Object(W.a)(t)})}};return Object(O.jsx)(O.Fragment,{children:I&&Object(O.jsxs)(A.a,{children:[Object(O.jsx)(A.a.Header,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:6,sm:9,md:10,lg:10,xl:10,onClick:function(){return t.onFocusChange({type:"user",name:l.User.displayName})},children:l.User.displayName}),Object(O.jsxs)(N.a,{xs:6,sm:3,md:2,lg:2,xl:2,children:[l.UserId==c&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(G.a,{className:"edit p-1",width:25,height:25,src:R,alt:"Edit",onClick:function(e){return Q(!0)}})}),(t.section.UserId==c||l.UserId==c)&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(G.a,{className:"delete p-1",width:25,height:25,src:M,alt:"Delete",onClick:function(e){return K()}})})]})]})}),Object(O.jsx)(A.a.Body,{className:"pe-0 pb-0",children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:3,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(B,{shitFor:{type:"comment",id:l.id}})}),Object(O.jsxs)(N.a,{xs:9,sm:10,md:10,lg:10,xl:10,className:"pe-3",children:[Object(O.jsxs)(A.a.Text,{children:[!L&&Object(O.jsx)(Z,{}),L&&Object(O.jsxs)(d.a,{onSubmit:function(e){return q(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"body",children:[Object(O.jsx)(d.a.Label,{children:"Body"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,children:l.body})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(e){return Q(!1)},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:Y})]})]})]}),(!w||!("comment"==t.commentTarget.type&&t.commentTarget.id==l.id))&&Object(O.jsx)(p.a,{className:"mb-3",active:!1,onClick:function(e){return n=!w,void(!w||"comment"==t.commentTarget.type&&t.commentTarget.id==l.id?(S(n),z(l.id)):z(l.id));var n},variant:"secondary",children:"comment"}),w&&"comment"==t.commentTarget.type&&t.commentTarget.id==l.id&&Object(O.jsx)(V,{post:t.post,onCommentSubmit:function(){X(),S(!1)},commentTarget:{type:"comment",id:l.id}}),x.length>0&&x.map((function(n){return Object(O.jsx)(e,{onFocusChange:t.onFocusChange,section:t.section,post:t.post,comment:n,commentTarget:t.commentTarget,onCommentTargetChange:z},n.id)}))]})]})})]})})};var z=function(e){var t=Object(r.useState)({}),n=Object(o.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)({}),i=Object(o.a)(a,2),l=i[0],j=i[1],b=Object(r.useState)({}),h=Object(o.a)(b,2),x=h[0],g=h[1],v=Object(r.useState)([]),y=Object(o.a)(v,2),w=y[0],S=y[1],k=Object(r.useState)(),C=Object(o.a)(k,2),I=C[0],A=C[1],T=Object(r.useState)({type:"post",id:null}),E=Object(o.a)(T,2),P=E[0],L=E[1],U=Object(r.useState)(!0),D=Object(o.a)(U,2),H=D[0],Y=D[1],J=Object(r.useState)(!1),Q=Object(o.a)(J,2),K=Q[0],q=Q[1],z=Object(r.useState)(""),Z=Object(o.a)(z,2),$=Z[0],_=Z[1],ee=function(e){L({type:"comment",id:e})},te=function(e){q(e)},ne=function(){var t=Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure you want to delete this post?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/posts",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:s.id,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(f.a)(m.a.mark((function t(n){var r,s,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s=null===(r=n.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=s,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=11;break}return a=c&&c.message||n.status,_(c),t.abrupt("return",Promise.reject(a));case 11:e.onFocusChange({type:"menu",name:"Home"}),console.log(c);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),re=function(){var t=Object(f.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/posts/"+encodeURIComponent(e.viewFocus.name),t.next=3,fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=11;break}return a=s&&s.message||t.status,console.log(a),e.abrupt("return",Promise.reject(a));case 11:c(s),A(sessionStorage.getItem("id")),g(s.Section),o=s.Comments.filter((function(e,t){return null==e.CommentId})),i=o.sort((function(e,t){return t.Shits.length-e.Shits.length})),S(i),j(s.User),L({type:"post",id:s.id}),console.log(s);case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){re()}),[e.viewFocus]);var se=function(){var e=Object(f.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,e.next=4,fetch("/posts",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:s.id,title:s.title,body:n.body.value,UserId:sessionStorage.getItem("id"),SectionId:x,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=11;break}return a=s&&s.message||t.status,_(s),e.abrupt("return",Promise.reject(a));case 11:q(!1),c(s),_(""),console.log(s);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(e){if(e.body){console.log(e.body);var t=e.body.replace(/(((https?:\/\/)|(www\.))[^\s]+)/g,(function(e){var t=e;return t.match("^https?://")||(t="https://"+t),'<a href="'+t+'">'+t+"</a>"}));return Object(O.jsx)(O.Fragment,{children:Object(W.a)(t)})}};return Object(O.jsxs)(u.a,{className:"pb-3",children:[Object(O.jsxs)(F.a,{className:"justify-content-start",children:[Object(O.jsx)(N.a,{xs:2,sm:1,md:1,lg:1,xl:1,children:s.id&&Object(O.jsx)(B,{shitFor:{type:"post",id:s.id}})}),Object(O.jsxs)(N.a,{children:[Object(O.jsxs)(F.a,{className:"justify-content-start",children:[Object(O.jsxs)(N.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:[x&&Object(O.jsxs)("h2",{onClick:function(t){return e.onFocusChange({type:"section",name:x.title})},value:x.title,children:["/",x.title,"/"]}),Object(O.jsx)("h1",{children:s.title}),Object(O.jsxs)("h6",{onClick:function(){return e.onFocusChange({type:"user",name:l.displayName})},children:["created by: ",l.displayName]}),!K&&s.body&&Object(O.jsx)(ce,{body:s.body})]}),Object(O.jsxs)(N.a,{xs:1,sm:1,md:1,lg:1,xl:1,children:[s.UserId==I&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(G.a,{className:"edit p-1",width:25,height:25,src:R,alt:"Edit",onClick:function(e){return te(!0)}})}),(s.UserId==I||x.UserId==I)&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(G.a,{className:"delete p-1",width:25,height:25,src:M,alt:"Delete",onClick:function(e){return ne()}})})]})]}),Object(O.jsxs)(F.a,{className:"justify-content-start pt-4",children:[K&&Object(O.jsxs)(d.a,{onSubmit:function(e){return se(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"body",children:[Object(O.jsx)(d.a.Label,{children:"Body"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,defaultValue:s.body})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(e){return te(!1)},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:$})]})]}),"post"===P.type&&H&&!K&&Object(O.jsx)(V,{post:s,onCommentSubmit:function(){re(),Y(!1)},commentTarget:P})]})]})]}),Object(O.jsx)(F.a,{className:"justify-content-center",children:Object(O.jsx)(N.a,{children:(!H||"post"!=P.type)&&Object(O.jsx)(p.a,{className:"mb-3",active:!1,onClick:function(e){return t=!H,void(!H||"post"==P.type&&P.id==s.id?(Y(t),L({type:"post",id:s.id})):L({type:"post",id:s.id}));var t},variant:"secondary",children:"comment"})})}),w.length>0&&w.map((function(t){return Object(O.jsx)(X,{section:x,post:s,onFocusChange:e.onFocusChange,viewFocus:e.viewFocus,comment:t,commentTarget:P,onCommentTargetChange:ee},t.id)}))]})};var Z=function(e){var t=Object(r.useState)({}),n=Object(o.a)(t,2),s=n[0],c=n[1],a=Object(r.useState)([]),i=Object(o.a)(a,2),l=i[0],d=i[1],j=Object(r.useState)([]),p=Object(o.a)(j,2),b=p[0],h=p[1],x=Object(r.useState)([]),g=Object(o.a)(x,2),v=g[0],y=g[1],w=Object(r.useState)([]),S=Object(o.a)(w,2),k=S[0],C=S[1],I=Object(r.useState)(0),T=Object(o.a)(I,2),E=T[0],P=T[1],G=Object(r.useState)(0),L=Object(o.a)(G,2),U=L[0],D=L[1],H=function(){var t=Object(f.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.viewFocus.name),t.next=3,fetch("/users/"+e.viewFocus.name,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(f.a)(m.a.mark((function e(t){var n,r,s,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=r,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(s=e.t0,t.ok){e.next=11;break}return a=s&&s.message||t.status,window.alert(a),e.abrupt("return",Promise.reject(a));case 11:console.log(s),c(s),o=s.Posts.sort((function(e,t){return t.Shits.length-e.Shits.length})),d(o),h(s.Sections),i=s.Comments.sort((function(e,t){return t.Shits.length-e.Shits.length})),y(i),C(s.Shits),P(Y(s.Posts)),D(Y(s.Comments));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){H()}),[e.viewFocus]);var Y=function(e){for(var t=0,n=0;n<e.length;n++){t+=e[n].Shits.length}return t};return Object(O.jsxs)(u.a,{children:[Object(O.jsxs)(F.a,{className:"pb-2",children:[Object(O.jsxs)("h1",{children:[s.displayName,"'s Profile"]}),Object(O.jsxs)("span",{className:"ps-4",children:[k.length," shits given!"]})]}),Object(O.jsxs)(F.a,{children:[Object(O.jsxs)(N.a,{xs:12,sm:12,md:12,lg:6,xl:5,children:[Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{children:Object(O.jsx)("h2",{children:"Posts"})}),Object(O.jsx)(N.a,{children:Object(O.jsxs)("span",{className:"p-0",children:[E," shits recieved on posts"]})})]}),l.length>0?l.map((function(t){return Object(O.jsx)(A.a,{children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(B,{shitFor:{type:"post",id:t.id}})}),Object(O.jsxs)(N.a,{xs:10,sm:10,md:10,lg:9,xl:8,onClick:function(n){return e.onFocusChange({type:"post",name:t.title})},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})]})})},t.id+t.title)})):"0 found"]}),Object(O.jsxs)(N.a,{xs:12,sm:12,md:6,lg:6,xl:4,className:"pt-2",children:[Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{children:Object(O.jsx)("h2",{children:"Comment"})}),Object(O.jsx)(N.a,{children:Object(O.jsxs)("span",{className:"p-0",children:[U," shits recieved on comments"]})})]}),v.length>0?v.map((function(t){return Object(O.jsx)(A.a,{onClick:function(n){return e.onFocusChange({type:"post",name:t.Post.title})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(N.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(B,{shitFor:{type:"comment",id:t.id}})}),Object(O.jsxs)(N.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:[Object(O.jsxs)(A.a.Title,{children:[s.displayName.length>125?s.displayName.substring(0,125)+"...":s.displayName,' on "',t.Post?t.Post.title.length>125?t.Post.title.substring(0,125)+"...":t.Post.title:"",t.parent?t.parent.body.length>125?t.parent.body.substring(0,125)+"...":t.parent.body:"",'"']}),Object(O.jsx)(A.a.Text,{children:t.body})]})]})})},t.id+s.displayName)})):"0 found"]}),Object(O.jsxs)(N.a,{xs:12,sm:12,md:6,lg:6,xl:3,className:"pt-2",children:[Object(O.jsx)("h2",{children:"Sections"}),b.length>0?b.map((function(t){return Object(O.jsx)(A.a,{onClick:function(n){return e.onFocusChange({type:"section",name:t.title})},children:Object(O.jsxs)(A.a.Body,{children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.description.length>125?t.description.substring(0,125)+"...":t.description})]})},t.id+t.title)})):"0 found"]})]})]})},$=(n(96),n(97),n(71));var _=function(){var e=Object(r.useState)({type:"menu",name:"Home"}),t=Object(o.a)(e,2),n=t[0],s=t[1],c=Object(r.useState)([]),a=Object(o.a)(c,2),i=a[0],u=a[1],l=Object(r.useState)(""),d=Object(o.a)(l,2),j=d[0],p=d[1],b=Object(r.useState)(""),h=Object(o.a)(b,2),m=h[0],f=h[1],x=function(e){s(e)};return Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)("div",{className:"container-fluid p-0",children:[Object(O.jsx)(C,{onFocusChange:x,onUpdateMemberSections:function(e){u(e)},onSearch:function(e){var t=Object($.a)(e);p(t)},memberSections:i,viewFocus:n}),Object(O.jsxs)("div",{className:"vh-92 container-fluid p-2",children:["Home"===n.name&&Object(O.jsx)(D,{viewFocus:n,memberSections:i,onFocusChange:x}),"Top Posts"===n.name&&Object(O.jsx)(H,{viewFocus:n,memberSections:i,onFocusChange:x}),"New Posts"===n.name&&Object(O.jsx)(Y,{viewFocus:n,memberSections:i,onFocusChange:x}),"Search"===n.name&&Object(O.jsx)(J,{viewFocus:n,onFocusChange:x,search:j}),"Create a new section"===n.name&&Object(O.jsx)(Q,{onFocusChange:x}),"Create a new post"===n.name&&Object(O.jsx)(q,{defaultSection:m,onFocusChange:x}),"section"===n.type&&Object(O.jsx)(K,{viewFocus:n,onMakePost:function(e){f(e)},onFocusChange:x}),"post"===n.type&&Object(O.jsx)(z,{viewFocus:n,onFocusChange:x}),"user"===n.type&&Object(O.jsx)(Z,{viewFocus:n,onFocusChange:x})]})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,117)).then((function(t){var n=t.getCLS,r=t.getFID,s=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),r(e),s(e),c(e),a(e)}))};a.a.render(Object(O.jsx)(s.a.StrictMode,{children:Object(O.jsx)(_,{})}),document.getElementById("root")),ee()}},[[99,1,2]]]);
//# sourceMappingURL=main.6ddbd737.chunk.js.map