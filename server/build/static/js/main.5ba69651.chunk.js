(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{109:function(e,t,n){},111:function(e,t,n){"use strict";n.r(t);var s=n(0),r=n.n(s),c=n(22),a=n.n(c),o=(n(85),n(9)),i=n(124),u=n(117),l=n(125),d=n(123),j=n(76),p=n(75),h=n(116),b=n(4),m=n.n(b),x=n(10),f=n(121),O=n(1);var g=function(e){var t=Object(s.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],a=Object(s.useState)(""),i=Object(o.a)(a,2),u=i[0],l=i[1],j=function(){l(""),c(!1)},h=function(){var t=Object(x.a)(m.a.mark((function t(n){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s=n.target.elements,t.next=4,fetch("/api/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayName:s.displayNameInput.value,email:s.emailInput.value,password:s.passwordInput.value}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=r,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=11;break}return a=c&&c.message||n.status,l(c),t.abrupt("return",Promise.reject(a));case 11:sessionStorage.setItem("id",c.id),sessionStorage.setItem("displayName",c.displayName),sessionStorage.setItem("session",c.session),e.onLogin(),console.log(c);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{variant:"primary",onClick:function(){return c(!0)},children:"Sign up"}),Object(O.jsxs)(f.a,{show:r,onHide:j,backdrop:"static",keyboard:!1,children:[Object(O.jsx)(f.a.Header,{children:Object(O.jsx)(f.a.Title,{children:"Sign up"})}),Object(O.jsx)(f.a.Body,{children:Object(O.jsxs)(d.a,{onSubmit:function(e){return h(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"displayNameInput",children:[Object(O.jsx)(d.a.Label,{children:"Display name"}),Object(O.jsx)(d.a.Control,{type:"text",placeholder:"Enter display name"}),Object(O.jsx)(d.a.Text,{className:"text-muted",children:"This will be your identity with your fellow shit givers."})]}),Object(O.jsxs)(d.a.Group,{controlId:"emailInput",children:[Object(O.jsx)(d.a.Label,{children:"Email address"}),Object(O.jsx)(d.a.Control,{type:"email",placeholder:"Enter email"}),Object(O.jsx)(d.a.Text,{className:"text-muted",children:"We'll never share your email with anyone else."})]}),Object(O.jsxs)(d.a.Group,{controlId:"passwordInput",children:[Object(O.jsx)(d.a.Label,{children:"Password"}),Object(O.jsx)(d.a.Control,{type:"password",placeholder:"Password"})]}),Object(O.jsxs)(f.a.Footer,{children:[Object(O.jsx)(d.a.Label,{style:{color:"red"},children:u}),Object(O.jsx)(p.a,{variant:"primary",onClick:j,children:"Close"}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})]})]})};var v=function(e){var t=Object(s.useState)(!1),n=Object(o.a)(t,2),r=n[0],c=n[1],a=Object(s.useState)(""),i=Object(o.a)(a,2),u=i[0],l=i[1],j=function(){l(""),c(!1)},h=function(){var t=Object(x.a)(m.a.mark((function t(n){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s=n.target.elements,t.next=4,fetch("/api/users/login",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayName:s.displayNameInput.value,password:s.passwordInput.value}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=r,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=11;break}return a=c&&c.message||n.status,l(c),t.abrupt("return",Promise.reject(a));case 11:console.log(c),sessionStorage.setItem("id",c.id),sessionStorage.setItem("displayName",c.displayName),sessionStorage.setItem("session",c.session),e.onLogin(c.id);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(p.a,{variant:"primary",onClick:function(){return c(!0)},children:"Sign in"}),Object(O.jsxs)(f.a,{show:r,onHide:j,backdrop:"static",keyboard:!1,children:[Object(O.jsx)(f.a.Header,{children:Object(O.jsx)(f.a.Title,{children:"Sign in"})}),Object(O.jsx)(f.a.Body,{children:Object(O.jsxs)(d.a,{onSubmit:function(e){return h(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"displayNameInput",children:[Object(O.jsx)(d.a.Label,{children:"Display name"}),Object(O.jsx)(d.a.Control,{type:"text",placeholder:"Enter display name"})]}),Object(O.jsxs)(d.a.Group,{controlId:"passwordInput",children:[Object(O.jsx)(d.a.Label,{children:"Password"}),Object(O.jsx)(d.a.Control,{type:"password",placeholder:"Password"})]}),Object(O.jsxs)(f.a.Footer,{children:[Object(O.jsx)(d.a.Label,{style:{color:"red"},children:u}),Object(O.jsx)(p.a,{variant:"primary",onClick:j,children:"Close"}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",children:"Submit"})]})]})})]})]})},y=n(122);var w=function(e){var t=sessionStorage.getItem("displayName"),n=function(){var t=Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/users/logout",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayName:sessionStorage.getItem("displayName"),sessionId:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=r,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=10;break}return a=c&&c.message||n.status,t.abrupt("return",Promise.reject(a));case 10:e.onLogout(),console.log(c);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(O.jsxs)(y.a,{title:t,id:"collapsible-nav-dropdown",children:[Object(O.jsx)(y.a.Item,{onClick:function(){return e.onChangeFocus({type:"user",name:t})},children:"Profile"}),Object(O.jsx)(y.a.Item,{onClick:function(){return n()},children:"Logout"})]})};var k=function(e){return e.isLoggedIn?Object(O.jsx)(w,{onChangeFocus:e.onChangeFocus,onLogout:e.onLogout}):Object(O.jsxs)(h.a,{children:[Object(O.jsx)(v,{onLogin:e.onLogin}),Object(O.jsx)(g,{onLogin:e.onLogout})]})},C=n(14);var S=function(e){Object(s.useEffect)((function(){if(e.isLoggedIn){var t=sessionStorage.getItem("displayName");(function(){var n=Object(x.a)(m.a.mark((function n(){return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/api/sections/"+t+"/memberships",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,c,a,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=r,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=10;break}return a=c&&c.message||n.status,t.abrupt("return",Promise.reject(a));case 10:o=c.map((function(e){var t={type:"section"};return t.name=e.title,t})),e.onUpdateMemberSections(o),console.log(o);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}})()()}}),[e.isLoggedIn,e.viewFocus]);var t=function(t){e.onFocusChange(t)};return Object(O.jsxs)(y.a,{title:e.viewFocus.name&&e.viewFocus.name.length>25?e.viewFocus.name.substring(0,25)+"...":e.viewFocus.name,id:"collapsible-nav-dropdown",children:[[{type:"menu",name:"Home"},{type:"menu",name:"Top Posts"},{type:"menu",name:"New Posts"}].map((function(n){return n!==e.viewFocus&&Object(O.jsx)(y.a.Item,{onClick:function(){return t(n)},children:n.name},n.type+n.name)})),e.isLoggedIn&&Object(O.jsx)(y.a.Divider,{}),e.isLoggedIn&&[{type:"menu",name:"Create a new section"},{type:"menu",name:"Create a new post"}].map((function(n){return n!==e.viewFocus&&Object(O.jsx)(y.a.Item,{onClick:function(){return t(n)},children:n.name},n.type+n.name)})),e.memberSections.length>0&&Object(O.jsx)(y.a.Divider,{}),e.memberSections.length>0&&e.memberSections.map((function(n){return n!==e.viewFocus&&Object(O.jsx)(C.b,{to:"/section/".concat(encodeURIComponent(n.name)),style:{all:"unset"},children:Object(O.jsx)(y.a.Item,{onClick:function(){return t(n)},children:n.name.length>25?n.name.substring(0,25)+"...":n.name},n.type+n.name)})}))]})};var I=function(e){var t=e.isLoggedIn,n=function(t){e.onFocusChange(t)};return Object(O.jsx)(i.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark",sticky:"top",children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)(i.a.Brand,{href:"/",children:"rotcrier"}),Object(O.jsx)(i.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),Object(O.jsxs)(i.a.Collapse,{id:"responsive-navbar-nav",children:[Object(O.jsx)(l.a,{className:"mr-auto",children:Object(O.jsx)(S,{isLoggedIn:t,onUpdateMemberSections:e.onUpdateMemberSections,onFocusChange:n,memberSections:e.memberSections,viewFocus:e.viewFocus})}),Object(O.jsx)(l.a,{children:Object(O.jsx)(k,{isLoggedIn:t,onChangeFocus:n,onLogin:e.onLogin,onLogout:e.onLogout})})]}),Object(O.jsx)(l.a,{children:Object(O.jsxs)(d.a,{className:"d-flex",onSubmit:function(t){return function(t){t.preventDefault(),n({type:"search",name:"Search"}),e.onSearch(t.target.elements.params.value)}(t)},children:[Object(O.jsx)(d.a.Group,{className:"me-1",controlId:"params",children:Object(O.jsx)(j.a,{type:"search",placeholder:"Search",className:"mr-sm-2 me-1 ","aria-label":"Search"})}),Object(O.jsx)(p.a,{variant:"primary",type:"submit",children:"Search"})]})})]})})},N=n(127),A=n(128),F=n(120),T=n(77),E=n(69),P=n(118),L=n(126),G=n(119),U=n.p+"static/media/shit.9c5175aa.png",B=n.p+"static/media/no-shit.4775112b.png";var D=function(e){var t=Object(s.useState)([]),n=Object(o.a)(t,2),r=n[0],c=n[1],a=e.shitFor,i=Object(s.useState)(!1),u=Object(o.a)(i,2),l=u[0],d=u[1],j=function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="/api/shits/"+a.type+"/"+a.id,e.next=3,fetch(t,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok||409==t.status){e.next=11;break}return a=r&&r.message||t.status,console.log(a),e.abrupt("return",Promise.reject(a));case 11:for(o=!1,i=0;i<r.length;i++)r[i].UserId==sessionStorage.getItem("id")&&(o=!0);c(r),d(o);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){j()}),[e.viewFocus]);var p=function(){var e=Object(x.a)(m.a.mark((function e(){var t,n,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=sessionStorage.getItem("id"),n="post"==a.type?a.id:null,s="comment"==a.type?a.id:null,console.log(n+" "+s),t){e.next=6;break}return e.abrupt("return",window.alert("You must be logged in to give a shit!"));case 6:if(l){e.next=11;break}return e.next=9,fetch("/api/shits",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({UserId:t,PostId:n,CommentId:s,sessionId:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=11;break}return 409==(c=r&&r.message||t.status)&&d(!0),e.abrupt("return",Promise.reject(c));case 11:j(),d(!0),console.log(r);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 9:e.next=13;break;case 11:return e.next=13,fetch("/api/shits",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({UserId:t,PostId:n,CommentId:s,sessionId:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=10;break}return c=r&&r.message||t.status,e.abrupt("return",Promise.reject(c));case 10:j(),d(!1),console.log(r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),h=function(t){return Object(O.jsx)(P.a,Object(E.a)(Object(E.a)({id:"shit-tooltip"},e),{},{children:t?"Shit given!":"Do you give a shit?"}))};return"post"===a.type?Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("h6",{className:"mb-1 p-0 text-center",children:r.length}),Object(O.jsx)(L.a,{placement:"right",delay:{show:250,hide:400},overlay:h(l),children:Object(O.jsx)("div",{className:"text-center",children:Object(O.jsx)(G.a,{className:"max-30px",onClick:function(){return p()},fluid:!0,src:l?U:B})})})]}):Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{children:Object(O.jsx)(L.a,{placement:"right",delay:{show:250,hide:400},overlay:h(l),children:Object(O.jsx)("div",{children:Object(O.jsx)(G.a,{className:"max-25px",onClick:function(){return p()},fluid:!0,src:l?U:B})})})}),Object(O.jsx)(T.a,{className:"ps-0",children:Object(O.jsx)("span",{className:"p-0 text-center align-middle",children:r.length})})]})};var H=function(e){var t=Object(s.useState)(),n=Object(o.a)(t,2),r=(n[0],n[1]),c=Object(s.useState)([]),a=Object(o.a)(c,2),i=a[0],l=a[1],d=function(){var t=Object(x.a)(m.a.mark((function t(n){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log(n),null==n){t.next=6;break}return t.next=4,fetch("/api/users/"+n+"/memberships/posts/0/25",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,c,a,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=c,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(a=t.t0,n.ok){t.next=10;break}return o=a&&a.message||n.status,t.abrupt("return",Promise.reject(o));case 10:r(a),i=a.memberships.map((function(e){return e.Posts})).flat().sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),l(i),0==i.length&&e.onFocusChange({type:"menu",name:"Top Posts"});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:t.next=8;break;case 6:return t.next=8,fetch("/api/posts/unauth/0/25",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=10;break}return c=r&&r.message||t.status,e.abrupt("return",Promise.reject(c));case 10:a=r.sort((function(e,t){return new Date(t.updatedAt)-new Date(e.updatedAt)})),l(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(s.useEffect)((function(){var e=sessionStorage.getItem("displayName");d(e||null)}),[e.isLoggedIn,e.viewFocus]);for(var j=function(){var t=Math.ceil(e.memberSections.length/25);return t},p=[],h=1;h<=j();h++)p.push(Object(O.jsx)(N.a.Item,{active:1===h,children:h},h));return Object(O.jsxs)(u.a,{children:[Object(O.jsx)("h2",{children:"Recent Updates"}),i.length>0&&i.map((function(t){return Object(O.jsx)(A.a,{children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{xs:2,sm:2,md:1,lg:1,xl:1,className:"p-0",children:Object(O.jsx)(D,{shitFor:{type:"post",id:t.id.toString()}})}),Object(O.jsx)(T.a,{xs:10,sm:10,md:11,lg:11,xl:11,onClick:function(){return e.onFocusChange({type:"post",name:t.title})},children:Object(O.jsxs)(C.b,{to:"/post/".concat(t.id),style:{all:"unset"},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})})]})})},t.id+t.title)}))]})};var Y=function(e){var t=Object(s.useState)(),n=Object(o.a)(t,2),r=(n[0],n[1],Object(s.useState)([])),c=Object(o.a)(r,2),a=c[0],i=c[1],l=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/posts/unauth/0/25",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=10;break}return c=r&&r.message||t.status,e.abrupt("return",Promise.reject(c));case 10:a=r.sort((function(e,t){return t.Shits.length-e.Shits.length})),i(a);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){l()}),[e.isLoggedIn,e.viewFocus]),Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)(u.a,{children:[Object(O.jsx)("h2",{children:"Top Posts"}),a.length>0&&a.map((function(t,n){return Object(O.jsxs)(F.a,{className:"row align-items-center",children:[Object(O.jsx)(T.a,{xs:1,sm:1,md:1,lg:1,xl:1,children:Object(O.jsx)("h6",{className:" float-end",children:n+1})}),Object(O.jsx)(T.a,{xs:11,sm:11,md:11,lg:11,xl:11,children:Object(O.jsx)(A.a,{children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{xs:2,sm:2,md:1,lg:1,xl:1,className:"p-0",children:Object(O.jsx)(D,{shitFor:{type:"post",id:t.id}})}),Object(O.jsx)(T.a,{xs:10,sm:10,md:11,lg:11,xl:11,onClick:function(){return e.onFocusChange({type:"post",name:t.title})},children:Object(O.jsxs)(C.b,{to:"/post/".concat(t.id),style:{all:"unset"},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})})]})})})})]},t.id+t.title)}))]})})};var R=function(e){var t=Object(s.useState)(),n=Object(o.a)(t,2),r=(n[0],n[1],Object(s.useState)([])),c=Object(o.a)(r,2),a=c[0],i=c[1],l=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/posts/unauth/0/25",{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=10;break}return c=r&&r.message||t.status,e.abrupt("return",Promise.reject(c));case 10:console.log(r),a=r.sort((function(e,t){return new Date(t.createdAt)-new Date(e.createdAt)})),console.log(a),i(r),console.log(r);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){l()}),[e.isLoggedIn,e.viewFocus]),Object(O.jsxs)(u.a,{children:[Object(O.jsx)("h2",{children:"New Posts"}),a.length>0&&a.map((function(t){return Object(O.jsx)(A.a,{children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{xs:2,sm:2,md:1,lg:1,xl:1,className:"p-0",children:Object(O.jsx)(D,{shitFor:{type:"post",id:t.id.toString()}})}),Object(O.jsx)(T.a,{xs:10,sm:10,md:11,lg:11,xl:11,onClick:function(){return e.onFocusChange({type:"post",name:t.title})},children:Object(O.jsxs)(C.b,{to:"/post/".concat(t.id),style:{all:"unset"},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})})]})})},t.id+t.title)}))]})};var J=function(e){console.log(e.search);var t=Object(s.useState)(),n=Object(o.a)(t,2),r=(n[0],n[1]),c=Object(s.useState)([]),a=Object(o.a)(c,2),i=a[0],l=a[1],d=Object(s.useState)([]),j=Object(o.a)(d,2),p=j[0],h=j[1],b=Object(s.useState)([]),f=Object(o.a)(b,2),g=f[0],v=f[1];return Object(s.useEffect)((function(){(function(){var t=Object(x.a)(m.a.mark((function t(){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="/api/search/"+encodeURIComponent(e.search),t.next=3,fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,c,a,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(c=e.t0,t.ok){e.next=10;break}return a=c&&c.message||t.status,e.abrupt("return",Promise.reject(a));case 10:console.log(c),r(sessionStorage.getItem("id")),l(c.Sections),o=c.Posts.sort((function(e,t){return t.Shits.length-e.Shits.length})),h(o),v(c.Users);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e.viewFocus]),Object(O.jsx)(u.a,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsxs)(T.a,{xs:12,sm:12,md:12,lg:7,xl:6,children:[Object(O.jsx)("h2",{children:"Posts"}),p.length>0?p.map((function(t){return Object(O.jsx)(A.a,{onClick:function(){return e.onFocusChange({type:"post",name:t.title})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(D,{shitFor:{type:"post",id:t.id}})}),Object(O.jsx)(T.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:Object(O.jsxs)(C.b,{to:"/posts/".concat(t.id),style:{all:"unset"},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})})]})})},t.id+t.title)})):"0 found"]}),Object(O.jsxs)(T.a,{xs:12,sm:12,md:6,lg:5,xl:3,className:"pt-2",children:[Object(O.jsx)("h2",{children:"Sections"}),i.length>0?i.map((function(t){return Object(O.jsx)(A.a,{onClick:function(){return e.onFocusChange({type:"section",name:t.title})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(C.b,{to:"/section/".concat(encodeURIComponent(t.title)),style:{all:"unset"},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.description.length>125?t.description.substring(0,125)+"...":t.description})]})})},t.id+t.title)})):"0 found"]}),Object(O.jsxs)(T.a,{xs:12,sm:12,md:6,lg:6,xl:3,className:"pt-2",children:[Object(O.jsx)("h2",{children:"Users"}),g.length>0?g.map((function(t){return Object(O.jsx)(A.a,{onClick:function(){return e.onFocusChange({type:"user",name:t.displayName})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsx)(A.a.Title,{children:t.displayName.length>125?t.displayName.substring(0,125)+"...":t.displayName})})},t.id+t.displayName)})):"0 found"]})]})})};var Q=function(e){var t=Object(s.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],a=function(){var t=Object(x.a)(m.a.mark((function t(n){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s=n.target.elements,t.next=4,fetch("/api/sections",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:s.sectionTitle.value,description:s.description.value,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,a,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=r,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(a=t.t0,n.ok){t.next=11;break}return o=a&&a.message||n.status,c(a),t.abrupt("return",Promise.reject(o));case 11:console.log(a.title),e.onFocusChange({type:"section",name:a.title}),c(""),console.log(a);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsx)(u.a,{children:Object(O.jsx)(F.a,{className:"justify-content-center",children:Object(O.jsx)(T.a,{xs:12,sm:12,md:8,lg:8,xl:6,children:Object(O.jsxs)(d.a,{onSubmit:function(e){return a(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"sectionTitle",children:[Object(O.jsx)(d.a.Label,{children:"Title"}),Object(O.jsx)(d.a.Control,{type:"text",placeholder:"Your new section's title"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:r})]}),Object(O.jsxs)(d.a.Group,{controlId:"description",children:[Object(O.jsx)(d.a.Label,{children:"Description"}),Object(O.jsx)(d.a.Control,{as:"textarea",rows:8,placeholder:"A brief description of the section"})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(){e.onFocusChange({type:"menu",name:"Home"})},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"})]})]})})})})},M=n(13),K="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAABmJLR0QA/wD/AP+gvaeTAAAB0UlEQVRoge2YsUrDQBjHf4mCbsXVd3CK4KibvoE4CuUyd6+YgHvnHgUfQ4ovYMGuvoEP0E1BGocYiEdySZrk7sT8x+O+4/e7fhfoB0OG/O94tgHyEUJMgDvg3fO82/l8/lpV44yAECIC7nNLm+12e7VYLF50dU4IFMBnqZSwLqCBz6KVsCpQAv8JHChrG+BSSrlSz/B7YqtMCfwGOAdiZX0ELMMwPFXP2e8HTx8NfHbLKyEEyp5RkiSPwEm+yPgvoOn5mdIiT8CHsudYLTIqUPFgp2EYXv/sOwOWwKGy50EtMvaIa3xtAL5IISekfZ9PLKWM1AIjApqenwFTqt9iITwYaKGKBxt7nndDevNlicrgAfY6YCxNja8N6/X6LQgCH7goOCKWUqqf1F/prYXqwAOMx+PA9/1n4EjZG1XBQ08CpuChBwGT8NCxgGl46FDABjx0JGALHjoQsAkPLQVsw0MLARfgYUcBV+BhBwGX4KGhgGvw0EDARXioKeAqPNQQcBkeKgRchweNwF+AB/1fSufhodlg6xd8bvRRND0wAg8NBNSbJx08qfDGbj5L46mEC22Tj+4RJw3OsQIP3cyFrMFDewGr8NBOwDr8kCFDhtjPN6ZWU6E3QqN4AAAAAElFTkSuQmCC",q="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAABmJLR0QA/wD/AP+gvaeTAAAD1ElEQVR4nO2cvW4TQRRGz9gdToMQEh1P4dDHeYWlQSDR8FNAEhoo00FFElLwUxBBiV8BS2lDniKih8YmQiK5FIntTYIV787Mzh1xT2nv7Ox+x7OenbUvGIZhGIZhGIZhGIZhGIZhGIZheCBF0RZwqY+jLgJO1mnF7CNaOFIU7dHPgx0ROVwY7D9yILH6ioGAG/VubSJyo3N85Y7b3f0To58oAsbhI9wFEORDThIm4SNPT1/4EktCcAHnw5+8nomEC+FP34giIaiAWeFP3lcuYWb40w2CSwgm4LLwJ9splXBp+NMNg0oIImDe8CfbK5Mwd/jTBsEkeE+xpCjaox8Hn+YNH8DhHvxaWtzSMEWtHD6A4/aofbgjRdH27d9bgOv3jxD3vWo7cTwZ9rrvUkqoFf6krYzo9499jyHYyQ+Xbr3EyYuq7VJdjvzC5/3C4NvjEMcc9NOXiwQt4UOE4a9dgqbwIdL1V6sEbeFDxC9AbRI0hg+RZyDD5cVXCM+rtgstQWv40MAUMLUEzeFDQ3PwVBK0hw8N3gQ1LSGH8KHhu9CmJOQSPiRYBogtIafwIdE6TCwJuYUPCRfCQkvIMXxIvBxcX8LZwHINHxSsx/tKAMg1fFAgAPwkONzvXMMHJQKgvoQ6aAkfFAmAZiRoCh+UCYC4ErSFDwoFQBwJGsMHpQIgrASt4YNiASdz++4GuBXP/agNHxQLAH8J2sOHAL8Lik9L9YfEF7Un57O8cG4/qkeBSgGhwi/tT60EdQJCh1/ar0oJqgTECr+0f3US1AiIHX6pH1USVAhoKvxSf2okJJ+G+j5MAdmq2s7Bw2Fv8a2G/yckPYAQT7IA6t6saRgJmf454l+PJPOUkOQSFPoZrgPpDPbXwL2pur/Ul6PGO435AD3Hh/ONCmgioNwkNCagyWByktCIgBSB5CIhuoCUQeQgIeosKHUAJ7OjvdW6s6NRr7sRe3YUr16Qok+f31KHbHUG+2uxRkKUEaApfPAbCeBWRsvd17FGQvh6QcrCD3VsONnsfN1/pvpvqprDL/WjSkK4ekEZhF/qT42EMPWCMgq/1K8KCd4Ccgy/1H9yCf6zoKJogVyr2swJ2wrW4qUz2Ft1wnblxuKun5y79zH4U71kWfoHIWUqj4SAJcvCfQnPXbRPV/hj5pYQuGhfsBsx1+8fda7evA98nrWN1vBhzps1zWUrx5wW8fsI3DvzuuLwy8wcCTkUbh1zXkIu4Y+5ICGn0sVjxhIEDnMKf8xEQuTi3VGRdVoafntTFwEXojaoYRiGYRiGYRiGYRiGYRiGYRj/N38BIo7a6agchMAAAAAASUVORK5CYII=";var V=function(e){Object(M.g)();var t=Object(s.useState)({}),n=Object(o.a)(t,2),r=n[0],c=n[1],a=Object(s.useState)([]),i=Object(o.a)(a,2),l=i[0],j=i[1],h=Object(s.useState)({}),b=Object(o.a)(h,2),f=b[0],g=b[1],v=Object(s.useState)(!1),y=Object(o.a)(v,2),w=y[0],k=y[1],S=Object(s.useState)([]),I=Object(o.a)(S,2),N=I[0],E=I[1],P=Object(s.useState)(!1),L=Object(o.a)(P,2),U=L[0],B=L[1],H=Object(s.useState)(""),Y=Object(o.a)(H,2),R=Y[0],J=Y[1],Q=e.userId,V=function(){var t=Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/sections/"+encodeURIComponent(e.viewFocus.name),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=11;break}return a=r&&r.message||t.status,window.alert(a),e.abrupt("return",Promise.reject(a));case 11:console.log(r),c(r),o=r.Posts.sort((function(e,t){return t.Shits.length-e.Shits.length})),E(o),j(r.members),g(r.members[0]),i=Z(r.members,sessionStorage.getItem("id")),k(i);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(s.useEffect)((function(){V()}),[e.viewFocus]);var W=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,e.next=4,fetch("/api/sections",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:r.title,description:n.description.value,UserId:sessionStorage.getItem("id"),session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(a=e.t0,t.ok){e.next=11;break}return o=a&&a.message||t.status,J(a),e.abrupt("return",Promise.reject(o));case 11:B(!1),c(a),j(r.members),i=r.Posts.sort((function(e,t){return t.Shits.length-e.Shits.length})),E(i),J(""),console.log(a);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(e){B(e)},z=function(){var t=Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure you want to delete this section?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/api/sections",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:r.title,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=r,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=11;break}return a=c&&c.message||n.status,J(c),t.abrupt("return",Promise.reject(a));case 11:e.onFocusChange({type:"menu",name:"Home"}),console.log(c);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(e,t){for(var n=!1,s=0;s<e.length;s++)e[s].id==t&&(n=!0);return n},$=function(){var t=Object(x.a)(m.a.mark((function t(n){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Q){t.next=2;break}return t.abrupt("return",window.alert("You must be logged in to join!"));case 2:if(r.UserId!=Q){t.next=4;break}return t.abrupt("return",window.alert("You are the moderator you can't abandon your section!"));case 4:return s=n?"/users/memberships/remove/":"/users/memberships/add/",console.log(r.title),t.next=8,fetch(s,{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({displayName:sessionStorage.getItem("displayName"),title:r.title,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(s){var c,a,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null===(c=s.headers.get("content-type"))||void 0===c?void 0:c.includes("applickaation/json"),t.t0=a,!t.t0){t.next=6;break}return t.next=5,s.json();case 5:t.t0=t.sent;case 6:if(o=t.t0,s.ok){t.next=11;break}return i=o&&o.message||s.status,J(o),t.abrupt("return",Promise.reject(i));case 11:k(!n),V(),e.onFocusChange({type:"section",name:r.title});case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(u.a,{className:"pb-3",children:[Object(O.jsxs)(F.a,{className:"mb-3",children:[Object(O.jsxs)(T.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:[Object(O.jsx)("h1",{children:r&&r.title}),Object(O.jsxs)("h6",{onClick:function(){return e.onFocusChange({type:"user",name:f.displayName})},children:["Moderator: ",f&&f.displayName]}),!U&&Object(O.jsx)("span",{children:r&&r.description}),Object(O.jsxs)("h6",{children:[l&&l.length," Members"]}),Object(O.jsx)(p.a,{variant:"secondary",onClick:function(e){return $(w)},children:w?"cancel membership":"become member"}),w&&Object(O.jsx)(p.a,{variant:"secondary",className:"ms-3",onClick:function(){return e.onMakePost(r.title),void e.onFocusChange({type:"menu",name:"Create a new post"})},children:"make a post"}),U&&Object(O.jsxs)(d.a,{onSubmit:function(e){return W(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"description",children:[Object(O.jsx)(d.a.Label,{children:"Description"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,defaultValue:r.description})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(){return X(!1)},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:R})]})]})]}),Object(O.jsx)(T.a,{xs:1,sm:1,md:1,lg:1,xl:1,children:r.UserId==Q&&Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(G.a,{className:"edit p-1",width:25,height:25,src:K,alt:"Edit",onClick:function(){return X(!0)}}),Object(O.jsx)(G.a,{className:"delete p-1",width:25,height:25,src:q,alt:"Delete",onClick:function(){return z()}})]})})]}),Object(O.jsx)(u.a,{children:N.length>0&&N.map((function(t){return Object(O.jsx)(A.a,{onClick:function(){return e.onFocusChange({type:"post",name:t.title})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{xs:1,sm:1,md:1,lg:1,xl:1,children:Object(O.jsx)(D,{shitFor:{type:"post",id:t.id}})}),Object(O.jsx)(T.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:Object(O.jsxs)(C.b,{to:"/post/".concat(t.id),style:{all:"unset"},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})})]})})},t.id+t.title)}))})]})};var W=function(e){var t=Object(s.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],a=Object(s.useState)(""),i=Object(o.a)(a,2),l=(i[0],i[1],function(){var t=Object(x.a)(m.a.mark((function t(n){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),sessionStorage.getItem("id")){t.next=4;break}return t.abrupt("return",window.alert("You must be logged in to comment!"));case 4:return s=n.target.elements,t.next=7,fetch("/api/posts",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({title:s.postTitle.value.normalize(),body:s.body.value.normalize(),sectionTitle:s.sectionTitle.value.normalize(),UserId:sessionStorage.getItem("id"),session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,a,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=r,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(a=t.t0,n.ok){t.next=11;break}return o=a&&a.message||n.status,c(a),t.abrupt("return",Promise.reject(o));case 11:e.onFocusChange({type:"post",name:a.title}),c(""),console.log(a);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());return Object(O.jsx)(u.a,{children:Object(O.jsx)(F.a,{className:"justify-content-center",children:Object(O.jsx)(T.a,{xs:12,sm:12,md:8,lg:8,xl:6,children:Object(O.jsxs)(d.a,{onSubmit:function(e){return l(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"postTitle",children:[Object(O.jsx)(d.a.Label,{children:"Title"}),Object(O.jsx)(d.a.Control,{required:!0,type:"text",placeholder:"Your new post's title"})]}),Object(O.jsxs)(d.a.Group,{controlId:"sectionTitle",children:[Object(O.jsx)(d.a.Label,{children:"Section"}),Object(O.jsx)(d.a.Control,{defaultValue:e.defaultSection,required:!0,type:"text",placeholder:"What section would you like to post in?"})]}),Object(O.jsxs)(d.a.Group,{controlId:"body",children:[Object(O.jsx)(d.a.Label,{children:"Body"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,placeholder:"What message would you like to share?"})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(){e.onFocusChange({type:"menu",name:"Home"})},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:r})]})]})})})})};var X=function(e){var t=Object(s.useState)(""),n=Object(o.a)(t,2),r=n[0],c=n[1],a=function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),sessionStorage.getItem("id")){t.next=4;break}return t.abrupt("return",window.alert("You must be logged in to comment!"));case 4:return s=n.target.elements,r=e.post.id,a="comment"==e.commentTarget.type?e.commentTarget.id:null,t.next=9,fetch("/api/comments",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({body:s.body.value,UserId:sessionStorage.getItem("id"),PostId:r,CommentId:a,sessionId:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(s){var r,a,o,i;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=null===(r=s.headers.get("content-type"))||void 0===r?void 0:r.includes("application/json"),t.t0=a,!t.t0){t.next=6;break}return t.next=5,s.json();case 5:t.t0=t.sent;case 6:if(o=t.t0,s.ok){t.next=11;break}return i=o&&o.message||s.status,c(o),t.abrupt("return",Promise.reject(i));case 11:e.onCommentSubmit(),c(""),n.target.reset(),console.log(o);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(O.jsxs)(d.a,{onSubmit:function(e){return a(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"body",children:[Object(O.jsx)(d.a.Label,{children:"Comment"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,placeholder:"What comment would you like to make?"})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:r})]})]})},z=n(59);var Z=function e(t){var n=Object(s.useState)(),r=Object(o.a)(n,2),c=r[0],a=r[1],i=Object(s.useState)(t.comment),u=Object(o.a)(i,2),l=u[0],j=u[1],h=Object(s.useState)([]),b=Object(o.a)(h,2),f=b[0],g=b[1],v=Object(s.useState)(!1),y=Object(o.a)(v,2),w=y[0],k=y[1],C=Object(s.useState)(!0),S=Object(o.a)(C,2),I=S[0],N=S[1],E=Object(s.useState)(!1),P=Object(o.a)(E,2),L=P[0],U=P[1],B=Object(s.useState)(""),H=Object(o.a)(B,2),Y=H[0],R=H[1],J=function(e){U(e)},Q=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(window.confirm("Are you sure you want to delete this comment?")){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,fetch("/api/comments",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:l.id,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=11;break}return c=r&&r.message||t.status,R(r),e.abrupt("return",Promise.reject(c));case 11:N(!1),R(""),console.log(r);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,e.next=4,fetch("/api/comments",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:l.id,body:n.body.value,UserId:sessionStorage.getItem("id"),PostId:l.PostId,CommentId:l.CommentId,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=11;break}return c=r&&r.message||t.status,R(r),e.abrupt("return",Promise.reject(c));case 11:U(!1),j(r),g(r.Comments),R(""),console.log(r);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/comments/"+l.id,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=11;break}return c=r&&r.message||t.status,console.log(c),e.abrupt("return",Promise.reject(c));case 11:console.log(r),j(r),a=r.Comments.sort((function(e,t){return t.Shits.length-e.Shits.length})),g(a),console.log(f);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){a(sessionStorage.getItem("id")),V()}),[t.viewFocus]);var W=function(e){t.onCommentTargetChange(e)},Z=function(){if(l.body){var e=l.body;console.log(e);var t=e.replace(/(((https?:\/\/)|(www\.))[^\s]+)/g,(function(e){var t=e;return t.match("^https?://")||(t="https://"+t),'<a href="'+t+'">'+t+"</a>"}));return Object(O.jsx)(O.Fragment,{children:Object(z.a)(t)})}};return Object(O.jsx)(O.Fragment,{children:I&&Object(O.jsxs)(A.a,{className:"p-0",children:[Object(O.jsx)(A.a.Header,{children:Object(O.jsxs)(F.a,{xs:"auto",className:"justify-content-between",children:[Object(O.jsx)(T.a,{onClick:function(){return t.onFocusChange({type:"user",name:l.User.displayName})},children:l.User.displayName}),Object(O.jsxs)(T.a,{children:[l.UserId==c&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(G.a,{className:"edit p-1",width:25,height:25,src:K,alt:"Edit",onClick:function(e){return J(!0)}})}),(t.section.UserId==c||l.UserId==c)&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(G.a,{className:"delete p-1",width:25,height:25,src:q,alt:"Delete",onClick:function(e){return Q()}})})]})]})}),Object(O.jsxs)(A.a.Body,{className:"ps-1 pe-0 pb-0",children:[Object(O.jsx)(F.a,{children:Object(O.jsxs)(A.a.Text,{children:[!L&&Object(O.jsx)(Z,{}),L&&Object(O.jsxs)(d.a,{onSubmit:function(e){return M(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"body",children:[Object(O.jsx)(d.a.Label,{children:"Body"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,children:l.body})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(e){return J(!1)},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:Y})]})]})]})}),Object(O.jsxs)(F.a,{className:"mt-3",xs:"auto",children:[Object(O.jsx)(T.a,{children:Object(O.jsx)(D,{shitFor:{type:"comment",id:l.id}})}),Object(O.jsx)(T.a,{children:(!w||!("comment"==t.commentTarget.type&&t.commentTarget.id==l.id))&&Object(O.jsx)(p.a,{className:"mb-1",active:!1,onClick:function(e){return n=!w,void(!w||"comment"==t.commentTarget.type&&t.commentTarget.id==l.id?(k(n),W(l.id)):W(l.id));var n},variant:"secondary",children:"comment"})})]}),Object(O.jsx)(F.a,{children:Object(O.jsxs)(T.a,{children:[w&&"comment"==t.commentTarget.type&&t.commentTarget.id==l.id&&Object(O.jsx)(X,{post:t.post,onCommentSubmit:function(){V(),k(!1)},commentTarget:{type:"comment",id:l.id}}),f.length>0&&f.map((function(n){return Object(O.jsx)(e,{onFocusChange:t.onFocusChange,section:t.section,post:t.post,comment:n,commentTarget:t.commentTarget,onCommentTargetChange:W},n.id)}))]})})]})]})})};var $=function(e){var t=Object(M.g)().id,n=Object(s.useState)({}),r=Object(o.a)(n,2),c=r[0],a=r[1],i=Object(s.useState)({}),l=Object(o.a)(i,2),j=l[0],h=l[1],b=Object(s.useState)({}),f=Object(o.a)(b,2),g=f[0],v=f[1],y=Object(s.useState)([]),w=Object(o.a)(y,2),k=w[0],S=w[1],I=Object(s.useState)({type:"post",id:null}),N=Object(o.a)(I,2),A=N[0],E=N[1],P=Object(s.useState)(!0),L=Object(o.a)(P,2),U=L[0],B=L[1],H=Object(s.useState)(!1),Y=Object(o.a)(H,2),R=Y[0],J=Y[1],Q=Object(s.useState)(""),V=Object(o.a)(Q,2),W=V[0],$=V[1],_=function(e){E({type:"comment",id:e})},ee=function(e){J(e)},te=function(){var t=Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(window.confirm("Are you sure you want to delete this post?")){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,fetch("/api/posts",{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:c.id,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var t=Object(x.a)(m.a.mark((function t(n){var s,r,c,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(s=n.headers.get("content-type"))||void 0===s?void 0:s.includes("application/json"),t.t0=r,!t.t0){t.next=6;break}return t.next=5,n.json();case 5:t.t0=t.sent;case 6:if(c=t.t0,n.ok){t.next=11;break}return a=c&&c.message||n.status,$(c),t.abrupt("return",Promise.reject(a));case 11:e.onFocusChange({type:"menu",name:"Home"});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ne=function(){var e=Object(x.a)(m.a.mark((function e(){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="/api/posts/"+t,e.next=3,fetch(n,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=11;break}return c=r&&r.message||t.status,console.log(c),e.abrupt("return",Promise.reject(c));case 11:a(r),h(r.User),v(r.Section),o=r.Comments.filter((function(e,t){return null==e.CommentId})),i=o.sort((function(e,t){return t.Shits.length-e.Shits.length})),S(i),E({type:"post",id:r.id});case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){ne()}),[e.viewFocus]);var se=function(){var e=Object(x.a)(m.a.mark((function e(t){var n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=t.target.elements,e.next=4,fetch("/api/posts",{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:c.id,title:c.title,body:n.body.value,UserId:sessionStorage.getItem("id"),SectionId:g,session:sessionStorage.getItem("session")}),credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=11;break}return c=r&&r.message||t.status,$(r),e.abrupt("return",Promise.reject(c));case 11:J(!1),a(r),$("");case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(e){if(e.body){var t=e.body.replace(/(((https?:\/\/)|(www\.))[^\s]+)/g,(function(e){var t=e;return t.match("^https?://")||(t="https://"+t),'<a href="'+t+'">'+t+"</a>"}));return Object(O.jsx)("div",{className:"pb-4 text-break",children:Object(z.a)(t)})}};return Object(O.jsx)(u.a,{className:"pb-3",children:Object(O.jsx)(F.a,{children:Object(O.jsxs)(T.a,{children:[Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{xs:3,sm:2,md:2,lg:1,xl:1,children:Object(O.jsx)(F.a,{children:c.id&&Object(O.jsx)(D,{shitFor:{type:"post",id:c.id}})})}),Object(O.jsxs)(T.a,{xs:9,sm:10,md:10,lg:11,xl:11,children:[Object(O.jsx)(F.a,{children:Object(O.jsx)(C.b,{to:"/section/".concat(encodeURIComponent(g.title)),style:{all:"unset"},children:g&&Object(O.jsxs)("h4",{className:"pb-2 text-break",onClick:function(){return e.onFocusChange({type:"section",name:g.title})},value:g.title,children:["/",g.title,"/"]})})}),Object(O.jsx)("h1",{className:"pb-2",children:c.title}),Object(O.jsxs)(F.a,{className:"pb-3 justify-content-between",children:[Object(O.jsx)(T.a,{xs:12,sm:7,md:7,lg:7,xl:7,xxl:7,children:j&&Object(O.jsxs)("h6",{className:"text-break",onClick:function(){return e.onFocusChange({type:"user",name:j.displayName})},children:["creator: ",j.displayName]})}),Object(O.jsxs)(T.a,{xs:12,sm:2,md:2,lg:2,xl:2,xxl:1,children:[c.UserId===e.userId&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(G.a,{className:"edit p-1",width:25,height:25,src:K,alt:"Edit",onClick:function(e){return ee(!0)}})}),(c.UserId===e.userId||g.UserId===e.userId)&&Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(G.a,{className:"delete p-1",width:25,height:25,src:q,alt:"Delete",onClick:function(e){return te()}})})]})]}),Object(O.jsx)(F.a,{children:Object(O.jsx)(T.a,{xs:9,sm:10,md:10,lg:11,xl:11,children:!R&&c.body&&Object(O.jsx)(re,{body:c.body})})})]})]}),Object(O.jsxs)(F.a,{className:"justify-content-center pt-4",children:[R&&Object(O.jsxs)(d.a,{onSubmit:function(e){return se(e)},children:[Object(O.jsxs)(d.a.Group,{controlId:"body",children:[Object(O.jsx)(d.a.Label,{children:"Body"}),Object(O.jsx)(d.a.Control,{required:!0,as:"textarea",rows:8,defaultValue:c.body})]}),Object(O.jsxs)(d.a.Group,{controlId:"formButtons",children:[Object(O.jsx)(p.a,{variant:"primary",className:"m-2",onClick:function(e){return ee(!1)},children:"Cancel"}),Object(O.jsx)(p.a,{variant:"primary",className:"m-2",type:"submit",children:"Submit"}),Object(O.jsx)(d.a.Label,{style:{color:"red"},children:W})]})]}),Object(O.jsxs)(T.a,{xs:12,sm:11,md:11,lg:11,xl:10,xxl:10,children:["post"===A.type&&U&&!R&&Object(O.jsx)(X,{post:c,onCommentSubmit:function(){ne(),B(!1)},commentTarget:A}),Object(O.jsx)(F.a,{className:"pb-4",children:Object(O.jsx)(T.a,{children:(!U||"post"!==A.type)&&Object(O.jsx)(p.a,{className:"mb-3",active:!1,onClick:function(e){return t=!U,void(!U||"post"===A.type&&A.id===c.id?(B(t),E({type:"post",id:c.id})):E({type:"post",id:c.id}));var t},variant:"secondary",children:"comment"})})}),Object(O.jsxs)(F.a,{className:"p-2",children:[Object(O.jsx)("hr",{}),k.length>0&&k.map((function(t){return Object(O.jsx)(Z,{section:g,post:c,onFocusChange:e.onFocusChange,viewFocus:e.viewFocus,comment:t,commentTarget:A,onCommentTargetChange:_},t.id)}))]})]})]})]})})})};var _=function(e){var t=Object(s.useState)({}),n=Object(o.a)(t,2),r=n[0],c=n[1],a=Object(s.useState)([]),i=Object(o.a)(a,2),l=i[0],d=i[1],j=Object(s.useState)([]),p=Object(o.a)(j,2),h=p[0],b=p[1],f=Object(s.useState)([]),g=Object(o.a)(f,2),v=g[0],y=g[1],w=Object(s.useState)([]),k=Object(o.a)(w,2),S=k[0],I=k[1],N=Object(s.useState)(0),E=Object(o.a)(N,2),P=E[0],L=E[1],G=Object(s.useState)(0),U=Object(o.a)(G,2),B=U[0],H=U[1],Y=function(){var t=Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log(e.viewFocus.name),t.next=3,fetch("/api/users/"+e.viewFocus.name,{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json"},credentials:"include"}).then(function(){var e=Object(x.a)(m.a.mark((function e(t){var n,s,r,a,o,i;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=null===(n=t.headers.get("content-type"))||void 0===n?void 0:n.includes("application/json"),e.t0=s,!e.t0){e.next=6;break}return e.next=5,t.json();case 5:e.t0=e.sent;case 6:if(r=e.t0,t.ok){e.next=11;break}return a=r&&r.message||t.status,window.alert(a),e.abrupt("return",Promise.reject(a));case 11:console.log(r),c(r),o=r.Posts.sort((function(e,t){return t.Shits.length-e.Shits.length})),d(o),b(r.Sections),i=r.Comments.sort((function(e,t){return t.Shits.length-e.Shits.length})),y(i),I(r.Shits),L(R(r.Posts)),H(R(r.Comments));case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.error("Error! ",e)}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Object(s.useEffect)((function(){Y()}),[e.viewFocus]);var R=function(e){for(var t=0,n=0;n<e.length;n++){t+=e[n].Shits.length}return t};return Object(O.jsxs)(u.a,{children:[Object(O.jsxs)(F.a,{className:"pb-2",children:[Object(O.jsxs)("h1",{children:[r.displayName,"'s Profile"]}),Object(O.jsxs)("span",{className:"ps-4",children:[S.length," shits given!"]})]}),Object(O.jsxs)(F.a,{children:[Object(O.jsxs)(T.a,{xs:12,sm:12,md:12,lg:6,xl:5,children:[Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{children:Object(O.jsx)("h2",{children:"Posts"})}),Object(O.jsx)(T.a,{children:Object(O.jsxs)("span",{className:"p-0",children:[P," shits recieved on posts"]})})]}),l.length>0?l.map((function(t){return Object(O.jsx)(A.a,{children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(D,{shitFor:{type:"post",id:t.id}})}),Object(O.jsx)(T.a,{xs:10,sm:10,md:10,lg:9,xl:8,onClick:function(){return e.onFocusChange({type:"post",name:t.title})},children:Object(O.jsxs)(C.b,{to:"/post/".concat(t.id),style:{all:"unset"},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.body.length>125?t.body.substring(0,125)+"...":t.body})]})})]})})},t.id+t.title)})):"0 found"]}),Object(O.jsxs)(T.a,{xs:12,sm:12,md:6,lg:6,xl:4,className:"pt-2",children:[Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{children:Object(O.jsx)("h2",{children:"Comment"})}),Object(O.jsx)(T.a,{children:Object(O.jsxs)("span",{className:"p-0",children:[B," shits recieved on comments"]})})]}),v.length>0?v.map((function(t){return Object(O.jsx)(A.a,{onClick:function(){return e.onFocusChange({type:"post",name:t.Post.title})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(F.a,{children:[Object(O.jsx)(T.a,{xs:2,sm:2,md:2,lg:2,xl:2,children:Object(O.jsx)(D,{shitFor:{type:"comment",id:t.id}})}),Object(O.jsxs)(T.a,{xs:10,sm:10,md:10,lg:9,xl:8,children:[Object(O.jsxs)(A.a.Title,{children:[r.displayName.length>125?r.displayName.substring(0,125)+"...":r.displayName,' on "',t.Post?t.Post.title.length>125?t.Post.title.substring(0,125)+"...":t.Post.title:"",t.parent?t.parent.body.length>125?t.parent.body.substring(0,125)+"...":t.parent.body:"",'"']}),Object(O.jsx)(A.a.Text,{children:t.body})]})]})})},t.id+r.displayName)})):"0 found"]}),Object(O.jsxs)(T.a,{xs:12,sm:12,md:6,lg:6,xl:3,className:"pt-2",children:[Object(O.jsx)("h2",{children:"Sections"}),h.length>0?h.map((function(t){return Object(O.jsx)(A.a,{onClick:function(){return e.onFocusChange({type:"section",name:t.title})},children:Object(O.jsx)(A.a.Body,{children:Object(O.jsxs)(C.b,{to:"/section/".concat(encodeURIComponent(t.title)),style:{all:"unset"},children:[Object(O.jsx)(A.a.Title,{children:t.title.length>125?t.title.substring(0,125)+"...":t.title}),Object(O.jsx)(A.a.Text,{children:t.description.length>125?t.description.substring(0,125)+"...":t.description})]})})},t.id+t.title)})):"0 found"]})]})]})},ee=(n(108),n(109),n(80));var te=Object(M.h)((function(){var e=Object(s.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],c=Object(s.useState)({type:"menu",name:"Home"}),a=Object(o.a)(c,2),i=a[0],u=a[1],l=Object(s.useState)([]),d=Object(o.a)(l,2),j=d[0],p=d[1],h=Object(s.useState)(""),b=Object(o.a)(h,2),m=b[0],x=b[1],f=Object(s.useState)(""),g=Object(o.a)(f,2),v=g[0],y=g[1],w=Object(s.useState)(),k=Object(o.a)(w,2),C=k[0],S=k[1],N=Object(M.f)(),A=function(e){u(e),"Home"===e.name&&N.push("/"),"Top Posts"===e.name&&N.push("/top-posts"),"New Posts"===e.name&&N.push("/new-posts"),"Search"===e.name&&N.push("/search"),"Create a new section"===e.name&&N.push("/create-new-section"),"Create a new post"===e.name&&N.push("/create-new-post"),"user"===e.type&&N.push("/user")};return console.log(N.location),Object(O.jsx)("div",{className:"App",children:Object(O.jsxs)("div",{className:"container-fluid p-0",children:[Object(O.jsx)(I,{memberSections:j,viewFocus:i,isLoggedIn:n,onLogin:function(e){r(!0),S(e)},onLogout:function(){r(!1),S(null),sessionStorage.clear()},onFocusChange:A,onUpdateMemberSections:function(e){p(e)},onSearch:function(e){var t=Object(ee.a)(e);x(t)}}),Object(O.jsx)("div",{className:"container-fluid p-2",children:Object(O.jsxs)(M.c,{children:[Object(O.jsx)(M.a,{exact:!0,path:"/",children:Object(O.jsx)(H,{viewFocus:i,memberSections:j,onFocusChange:A})}),Object(O.jsx)(M.a,{path:"/top-posts",children:Object(O.jsx)(Y,{viewFocus:i,memberSections:j,onFocusChange:A})}),Object(O.jsx)(M.a,{path:"/new-posts",children:Object(O.jsx)(R,{viewFocus:i,memberSections:j,onFocusChange:A})}),Object(O.jsx)(M.a,{path:"/search",children:Object(O.jsx)(J,{viewFocus:i,onFocusChange:A,search:m})}),Object(O.jsx)(M.a,{path:"/create-new-section",children:Object(O.jsx)(Q,{onFocusChange:A})}),Object(O.jsx)(M.a,{path:"/create-new-post",children:Object(O.jsx)(W,{defaultSection:v,onFocusChange:A})}),Object(O.jsx)(M.a,{path:"/section/:name",children:Object(O.jsx)(V,{viewFocus:i,isLoggedIn:n,userId:C,onMakePost:function(e){y(e)},onFocusChange:A})}),Object(O.jsx)(M.a,{path:"/post/:id",children:Object(O.jsx)($,{viewFocus:i,isLoggedIn:n,userId:C,onFocusChange:A})}),Object(O.jsx)(M.a,{path:"/user",children:Object(O.jsx)(_,{viewFocus:i,isLoggedIn:n,userId:C,onFocusChange:A})})]})})]})})})),ne=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,129)).then((function(t){var n=t.getCLS,s=t.getFID,r=t.getFCP,c=t.getLCP,a=t.getTTFB;n(e),s(e),r(e),c(e),a(e)}))};a.a.render(Object(O.jsx)(r.a.StrictMode,{children:Object(O.jsx)(C.a,{children:Object(O.jsx)(te,{})})}),document.getElementById("root")),ne()},85:function(e,t,n){}},[[111,1,2]]]);
//# sourceMappingURL=main.5ba69651.chunk.js.map